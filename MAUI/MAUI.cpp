//-----------------------------------------------------------------------------
// Entaro ChucK Developer!
// This is a Chugin boilerplate, generated by chugerate!
//-----------------------------------------------------------------------------

// this should align with the correct versions of these ChucK files
#include "chuck_dl.h"
#include "chuck_def.h"

// general includes
#include <stdio.h>
#include <limits.h>

#include "chuck_ui.h"
#include "chuck_compile.h"
#include "miniAudicle_import.h"
#include "chuck_globals.h"


t_CKBOOL maui_main_loop_hook( void * bindle )
{
    Chuck_UI_Manager * ui_manager = ( Chuck_UI_Manager * ) bindle;
    
    ui_manager->run();
    
    return TRUE;
}

t_CKBOOL maui_main_loop_quit( void * bindle )
{
    Chuck_UI_Manager * ui_manager = ( Chuck_UI_Manager * ) bindle;
    
    ui_manager->shutdown();
    
    return TRUE;
}

// query function: chuck calls this when loading the Chugin
// NOTE: developer will need to modify this function to
// add additional functions to this Chugin
CK_DLL_QUERY( MAUI )
{
    // hmm, don't change this...
    QUERY->setname(QUERY, "MAUI");
    
    Chuck_UI_Manager * ui_manager = Chuck_UI_Manager::instance();
    ui_manager->init();
    
    Chuck_DL_MainThreadHook * hook = QUERY->create_main_thread_hook( QUERY, maui_main_loop_hook, maui_main_loop_quit, ui_manager );
    ui_manager->set_hook( hook );
    
    init_maui( QUERY );

    // wasn't that a breeze?
    return TRUE;
}
